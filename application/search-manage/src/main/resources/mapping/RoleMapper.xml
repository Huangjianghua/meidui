<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.meiduimall.application.search.manage.IDao.RoleMapper">
   <select id="selectRoleList"  parameterType="com.meiduimall.application.search.manage.system.domain.Role" resultType="com.meiduimall.application.search.manage.system.domain.Role">
       SELECT id,role_name,role_desc,status  FROM  t_role   WHERE 1=1
       <if test="role_name!=null and role_name!=''">
         AND  role_name like CONCAT('%','${role_name}','%' )  
       </if>
        <if test="pageSize!=null and pageSize!=''">
	       limit #{offset},#{pageSize}
	    </if>
   </select>
   
   <select id="selectById" parameterType="java.lang.Integer" resultType="com.meiduimall.application.search.manage.system.domain.Role">
        SELECT id,role_name,role_desc,status  FROM  t_role where id =#{rid}
   </select>
   
    <insert id="insertRole" parameterType="com.meiduimall.application.search.manage.system.domain.Role" >
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
	      select  LAST_INSERT_ID() 
	   </selectKey>
         INSERT INTO t_role(role_name,role_desc,status)
              VALUES(#{role_name},#{role_desc},#{status})
    </insert>
    
    <update id="updateRole" parameterType="com.meiduimall.application.search.manage.system.domain.Role">
        UPDATE t_role SET
		<if test="role_name !=null and role_name !=''">
		  role_name=#{role_name} ,
		</if>
		
		<if test="role_desc !=null and  role_desc!=''">
		    role_desc=#{role_desc},
		</if>
		
		<if test="status !=null and status!=''">
		    status =#{status}
		</if>
		WHERE id=#{id}
    </update>
    
    <select id="pageCount" parameterType="com.meiduimall.application.search.manage.system.domain.Role" resultType="java.lang.Integer">
       SELECT count(1) FROM  t_role  WHERE 1=1
       <if test="role_name!=null and role_name!=''">
          AND  role_name like CONCAT('%','${role_name}','%' )  
       </if>
    </select>
    
</mapper>