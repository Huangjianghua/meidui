<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--会员账户冻结解冻记录表ms_account_freeze_detail相关操作 -->
<mapper namespace="MSAccountFreezeDetailMapper">

	<!-- 根据订单号查询是否存在余额冻结解冻记录 -->
	<select id="getRecordByOrderId" parameterType="java.lang.String" resultType="java.lang.Integer">
		SELECT count(1) 
		FROM ms_account_freeze_detail
		WHERE business_no = #{orderId}
	</select>
	
	<!-- 根据订单号查询是否存在余额冻结解冻记录 -->
	<select id="queryRecordByOrderId" parameterType="java.lang.String" resultType="com.meiduimall.service.account.model.MSAccountFreezeDetail">
		SELECT m.id,
			m.account_no accountNo,
			m.trade_type tradeType,
			m.trade_amount tradeAmount,
			m.trade_date tradeDate,
			m.in_or_out inOrOut,
			m.freeze_balance freezeBalance,
		    m.business_no businessNo,
			m.create_date createDate,
			m.create_user createUser,
			m.update_date updateDate,
			m.update_user updateUser,
			m.remark
		FROM ms_account_freeze_detail m
		WHERE m.business_no = #{orderId}
	</select>
	
	<insert id="insertAccountFreezeDetail" parameterType="java.util.Map">
		INSERT INTO ms_account_freeze_detail 
		VALUES(
			#{id},
			#{accountNo},
			#{tradeType},
			#{tradeAmount},
			#{tradeDate},
			#{inOrOut},
			#{freezeBalance},
			#{businessNo},
			#{createDate},
			#{createUser},
			#{updateDate},
			#{updateUser},
			#{remark}
			)
	</insert>
	
</mapper>